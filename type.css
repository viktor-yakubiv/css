:root {
  --font-family-sans-serif: 
    -apple-system, BlinkMacSystemFont, avenir next, avenir, segoe ui, 
    helvetica neue, helvetica, Ubuntu, roboto, noto, arial, sans-serif;
  --font-family-serif:
    Iowan Old Style, Apple Garamond, Baskerville, Times New Roman, Droid Serif,
    Times, Source Serif Pro, serif;
  --font-family-monospace: 
    Menlo, Consolas, Monaco, Liberation Mono, Lucida Console, monospace;
  --font-family-emoji:
    Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol;
  --font-family-display: var(--font-family-sans-serif);
}

:root {
  /**
   * Enables negative block spacing for text elements to fix the visual spacing
   * when combine large and small font sizes, e.g. <h1> and <p>.
   * 
   * @type {Number}, either 0 (disabled) or 1 (enabled)
   */
  --vertical-rhythm: 1;

  --heading-spacing: var(--size-400);
  --body-spacing: var(--size-400);
}

:root {
  font-family: var(--font-family-sans-serif), var(--font-family-emoji);
  line-height: var(--scale-3);
}

h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-family-display);
  line-height: var(--scale-2);
  font-weight: 600;
}

h1 {
  font-size: var(--size-900);
}

h2 {
  font-size: var(--size-800);
}

h3 {
  font-size: var(--size-700);
}

h4 {
  font-size: var(--size-600);
}

h5 {
  font-size: var(--size-500);
}

h6 {
  font-size: var(--size-400);
  font-style: italic;
}

blockquote {
  font-size: var(--size-500);
}

figcaption {
  font-size: var(--size-200);
}

/* May be too opinionated */
blockquote + figcaption {
  text-align: right;
}

blockquote + figcaption::before {
  content: 'â€“ ';
}

small {
  font-size: var(--size-300);
}

/**
 * Layout
 *
 * Could be moved to a separate file or placed under separate class .text-flow
 */


:is(h1, h2, h3, h4, h5, h6) + * {
  margin-block-start: var(--heading-spacing);
}

:is(p, ul, ol, dl) + * {
  margin-block-start: var(--body-spacing);
}

* + figure, figure + * {
  margin-block-start: var(--size-400);
}

* + figcaption {
  margin-block-start: var(--size-200);
}

/* Experimental: section spacing */

* + h1 {
  margin-block-start: var(--size-900);
}

/**
 * Here and below :where() is used to have the same specificity
 * as a combining with the universal selector (*) as above.
 */
:where(:not(h1)) + h2 {
  margin-block-start: var(--size-800);
}

:where(:not(h2)) + h3 {
  margin-block-start: var(--size-700);
}

:where(:not(h3)) + h4 {
  margin-block-start: var(--size-600);
}

/* Experimental: Vertical rhythm fix */

h1, h2, h3, h4, h5, h6, p, figcaption {
  margin-block-end: calc(var(--vertical-rhythm) * (1em - 1ex) / -2)
}
