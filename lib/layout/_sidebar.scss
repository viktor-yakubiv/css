@mixin sidebar($size: 0) {
  &:where(.with) {
    @if $size > 0 {
      --sidebar-size: #{$size};
    }

    display: flex;
    flex-wrap: wrap;
    row-gap: var(--row-gap);
    column-gap: var(--col-gap);
  }

  &:where(.with) > :where(:not(#{&})) {
    flex-basis: 0;
    flex-grow: 999;
    min-inline-size: 50%;

    @supports not (min-inline-size: 50%) {
      min-width: 50%;
    }
  }

  &:where(.with) > & {
    flex-basis: var(--sidebar-size);
    flex-grow: 1;
  }
}
